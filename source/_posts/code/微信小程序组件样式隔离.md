---
title: 微信小程序如何避免自定义组件样式对整个页面产生影响？
categories:
  - Code
tags:
  - 小程序
abbrlink: 21147
date: 2021-06-17 15:02:46
updated: 2021-09-19 21:51:04
---

微信小程序是一种轻量级的应用程序开发框架，它允许开发者使用简单的 JavaScript、CSS 和 HTML 来构建功能强大的小程序。然而，在实际的开发过程中，开发者可能会遇到一个问题：如何避免自定义组件样式对整个页面产生影响？

默认情况下，自定义组件的样式只受到自定义组件 wxss 的影响。但是，如果在 `app.wxss` 或页面的 wxss 中使用了标签名选择器（或其他特殊选择器）来直接指定样式，则这些选择器会影响到页面和所有组件，这通常不是我们想要的结果。

为了解决这个问题，微信小程序引入了样式隔离的概念。开发者可以通过指定特殊的样式隔离选项 `styleIsolation` 来控制组件的样式隔离程度。

```jsx
Component({
  options: {
    styleIsolation: "isolated",
  },
});
```

`styleIsolation` 选项从基础库版本 2.6.5 开始支持。它支持以下取值：

- isolated 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；
- apply-shared 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；
- shared 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 `apply-shared` 或 `shared` 的自定义组件。（这个选项在插件中不可用。）

使用样式隔离可以有效地避免组件样式对整个页面产生影响，同时又保持组件内部样式的一致性。不过，在实际使用中，需要注意以下几点：

- 如果组件定义了相同的 class 名称，那么它们之间的样式不会被隔离；
- `styleIsolation` 选项只会影响组件的样式，不会影响组件内部的事件、属性等。

总之，在开发微信小程序时，样式隔离是一个非常有用的特性，可以帮助我们更好地管理组件样式，提高代码复用性和可维护性。

  <!--
  默认情况下，自定义组件的样式只受到自定义组件 wxss 的影响。除非以下两种情况：


- `app.wxss` 或页面的 wxss 中使用了标签名选择器（或一些其他特殊选择器）来直接指定样式，这些选择器会影响到页面和全部组件。通常情况下这是不推荐的做法。
- 指定特殊的样式隔离选项 `styleIsolation` 。

```js
Component({
  options: {
    styleIsolation: "isolated",
  },
});
```

`styleIsolation` 选项从基础库版本 2.6.5 开始支持。它支持以下取值：

- `isolated` 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；
- `apply-shared` 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；
- `shared` 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 `apply-shared` 或 `shared` 的自定义组件。（这个选项在插件中不可用。） -->
